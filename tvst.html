<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>tvst – dcbgi</title>
  <style>
    /* ── Reset & Base ──────────────────────────────────────────────────────── */
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    :root {
      --bg:        #0f1117;
      --surface:   #1a1d27;
      --border:    #2a2d3a;
      --accent:    #7c6af7;
      --accent-lt: #a899ff;
      --text:      #e2e4f0;
      --text-muted:#8b8fa8;
      --radius:    12px;
      --transition:0.25s ease;
    }
    body {
      background: var(--bg);
      color: var(--text);
      font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
      line-height: 1.6;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }
    a { color: var(--accent-lt); text-decoration: none; }
    a:hover { color: #fff; }

    /* ── Navbar ────────────────────────────────────────────────────────────── */
    .navbar {
      position: sticky;
      top: 0;
      z-index: 100;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 1rem 2rem;
      background: rgba(15,17,23,.85);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid var(--border);
    }
    .nav-logo {
      font-size: 1.2rem;
      font-weight: 700;
      color: var(--accent-lt);
      letter-spacing: .05em;
    }
    .nav-back {
      font-size: 0.9rem;
      font-weight: 600;
      color: var(--text-muted);
      transition: color var(--transition);
    }
    .nav-back:hover { color: var(--text); }

    /* ── Main ──────────────────────────────────────────────────────────────── */
    main {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 3rem 1.5rem 4rem;
      gap: 2rem;
    }
    .page-header { text-align: center; }
    .page-header h1 {
      font-size: clamp(1.6rem, 4vw, 2.4rem);
      font-weight: 800;
      margin-bottom: 0.4rem;
    }
    .page-header p { color: var(--text-muted); font-size: 1rem; }
    .accent { color: var(--accent-lt); }

    /* ── Canvas wrapper ────────────────────────────────────────────────────── */
    .canvas-wrapper {
      background: #000;
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 0;
      overflow: hidden;
      display: flex;
      justify-content: center;
      align-items: center;
      width: 100%;
      max-width: 540px;
    }
    #tvst-canvas {
      display: block;
      width: 100% !important;
      height: auto !important;
      aspect-ratio: 4 / 3;
    }

    /* ── Controls panel ────────────────────────────────────────────────────── */
    .controls-panel {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 1.5rem 2rem;
      width: 100%;
      max-width: 540px;
    }
    .controls-panel h2 {
      font-size: 1rem;
      font-weight: 700;
      margin-bottom: 1rem;
      color: var(--accent-lt);
    }
    .controls-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 0.75rem 2rem;
    }
    .control-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 0.5rem;
    }
    .control-label { color: var(--text-muted); font-size: 0.88rem; }

    /* ── Slider ────────────────────────────────────────────────────────────── */
    input[type="range"] {
      -webkit-appearance: none;
      appearance: none;
      width: 100%;
      height: 4px;
      border-radius: 2px;
      background: var(--border);
      outline: none;
      cursor: pointer;
    }
    input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 14px;
      height: 14px;
      border-radius: 50%;
      background: var(--accent-lt);
      cursor: pointer;
    }
    input[type="range"]::-moz-range-thumb {
      width: 14px;
      height: 14px;
      border: none;
      border-radius: 50%;
      background: var(--accent-lt);
      cursor: pointer;
    }
    .slider-row {
      grid-column: 1 / -1;
      display: flex;
      flex-direction: column;
      gap: 0.4rem;
    }
    .slider-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .slider-value {
      font-size: 0.8rem;
      color: var(--accent-lt);
      font-family: monospace;
    }

    /* ── Toggle buttons ────────────────────────────────────────────────────── */
    .btn-row {
      grid-column: 1 / -1;
      display: flex;
      gap: 0.75rem;
    }
    .btn {
      flex: 1;
      padding: 0.5rem 0;
      background: rgba(124,106,247,.15);
      border: 1px solid rgba(124,106,247,.3);
      border-radius: 6px;
      color: var(--accent-lt);
      font-size: 0.85rem;
      font-weight: 700;
      cursor: pointer;
      transition: background var(--transition);
    }
    .btn:hover { background: rgba(124,106,247,.35); }
    .btn.active {
      background: rgba(124,106,247,.45);
      border-color: var(--accent-lt);
    }

    /* ── Footer ────────────────────────────────────────────────────────────── */
    footer {
      text-align: center;
      padding: 1.5rem;
      color: var(--text-muted);
      font-size: 0.85rem;
      border-top: 1px solid var(--border);
    }

    @media (max-width: 480px) {
      .controls-grid { grid-template-columns: 1fr; }
      .navbar { padding: 0.85rem 1.25rem; }
    }
  </style>
</head>
<body>

  <!-- Navigation -->
  <nav class="navbar">
    <span class="nav-logo">Berry Better Solutions</span>
    <a href="index.html" class="nav-back">← Back to Profile</a>
  </nav>

  <main>

    <div class="page-header">
      <h1><span class="accent">tvst</span></h1>
      <p>Real-time TV static visualiser rendered on an HTML5 canvas</p>
    </div>

    <!-- Canvas -->
    <div class="canvas-wrapper">
      <canvas id="tvst-canvas" aria-label="TV static visualiser"></canvas>
    </div>

    <!-- Controls -->
    <div class="controls-panel">
      <h2>Controls</h2>
      <div class="controls-grid">

        <div class="slider-row">
          <div class="slider-header">
            <span class="control-label">Noise intensity</span>
            <span class="slider-value" id="intensity-val">50%</span>
          </div>
          <input type="range" id="intensity" min="0" max="100" value="50" />
        </div>

        <div class="slider-row">
          <div class="slider-header">
            <span class="control-label">Scan-line strength</span>
            <span class="slider-value" id="scanline-val">40%</span>
          </div>
          <input type="range" id="scanline" min="0" max="100" value="40" />
        </div>

        <div class="btn-row">
          <button class="btn active" id="btn-pause" aria-pressed="true">Pause</button>
          <button class="btn" id="btn-color" aria-pressed="false">Colour off</button>
        </div>

      </div>
    </div>

  </main>

  <footer>
    <p>&copy; <span id="year"></span> dcbgi. View source on
      <a href="https://github.com/dcbgi/tvst" target="_blank" rel="noopener noreferrer">GitHub</a>.</p>
  </footer>

  <script>
  // ─── Footer year ─────────────────────────────────────────────────────────────
  (function () {
    var el = document.getElementById("year");
    if (el) el.textContent = new Date().getFullYear();
  }());

  // ─── TV Static Visualiser ────────────────────────────────────────────────────
  (function () {
    var canvas  = document.getElementById("tvst-canvas");
    var ctx     = canvas.getContext("2d");

    // ── State ─────────────────────────────────────────────────────────────────
    var W = 320, H = 240;
    canvas.width  = W;
    canvas.height = H;

    var running       = true;
    var colorMode     = false;
    var intensity     = 0.5;   // 0–1
    var scanlineAlpha = 0.4;   // 0–1
    var rafId         = null;

    // ── ImageData buffer (reused every frame) ─────────────────────────────────
    var imageData = ctx.createImageData(W, H);
    var pixels    = imageData.data;   // Uint8ClampedArray

    // ── Render one frame of static ────────────────────────────────────────────
    function drawStatic() {
      var len = pixels.length;
      for (var i = 0; i < len; i += 4) {
        if (colorMode) {
          // Random RGB noise
          pixels[i]     = Math.random() * 255 * intensity | 0;
          pixels[i + 1] = Math.random() * 255 * intensity | 0;
          pixels[i + 2] = Math.random() * 255 * intensity | 0;
        } else {
          // Greyscale noise
          var v = Math.random() * 255 * intensity | 0;
          pixels[i]     = v;
          pixels[i + 1] = v;
          pixels[i + 2] = v;
        }
        pixels[i + 3] = 255;
      }
      ctx.putImageData(imageData, 0, 0);

      // ── Scan-lines overlay ────────────────────────────────────────────────
      if (scanlineAlpha > 0) {
        ctx.save();
        ctx.fillStyle = "rgba(0,0,0," + scanlineAlpha + ")";
        for (var y = 0; y < H; y += 2) {
          ctx.fillRect(0, y, W, 1);
        }
        ctx.restore();
      }
    }

    // ── Animation loop ────────────────────────────────────────────────────────
    function loop() {
      if (!running) return;
      drawStatic();
      rafId = requestAnimationFrame(loop);
    }

    loop();

    // ── Pause / resume ────────────────────────────────────────────────────────
    var btnPause = document.getElementById("btn-pause");
    btnPause.addEventListener("click", function () {
      running = !running;
      if (running) {
        btnPause.textContent = "Pause";
        btnPause.setAttribute("aria-pressed", "true");
        btnPause.classList.add("active");
        loop();
      } else {
        btnPause.textContent = "Resume";
        btnPause.setAttribute("aria-pressed", "false");
        btnPause.classList.remove("active");
        cancelAnimationFrame(rafId);
      }
    });

    // ── Colour toggle ─────────────────────────────────────────────────────────
    var btnColor = document.getElementById("btn-color");
    btnColor.addEventListener("click", function () {
      colorMode = !colorMode;
      btnColor.textContent  = colorMode ? "Colour on"  : "Colour off";
      btnColor.setAttribute("aria-pressed", colorMode ? "true" : "false");
      btnColor.classList.toggle("active", colorMode);
    });

    // ── Intensity slider ──────────────────────────────────────────────────────
    var sliderIntensity = document.getElementById("intensity");
    var labelIntensity  = document.getElementById("intensity-val");
    sliderIntensity.addEventListener("input", function () {
      intensity = sliderIntensity.value / 100;
      labelIntensity.textContent = sliderIntensity.value + "%";
    });

    // ── Scan-line slider ──────────────────────────────────────────────────────
    var sliderScanline = document.getElementById("scanline");
    var labelScanline  = document.getElementById("scanline-val");
    sliderScanline.addEventListener("input", function () {
      scanlineAlpha = sliderScanline.value / 100;
      labelScanline.textContent = sliderScanline.value + "%";
    });
  }());
  </script>

</body>
</html>
